(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7652:function(e,n,t){Promise.resolve().then(t.bind(t,2303))},2303:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var s=t(7573),r=t(4798),i=t(9436),l=t(8972),o=t(7653);function u(){let{sendMessage:e,messages:n}=(0,l.useSocket)(),[t,u]=(0,o.useState)("");return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{children:"All messages will be here..."})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{onChange:e=>u(e.target.value),id:"outlined-basic",label:"Message...",variant:"outlined"}),(0,s.jsx)(r.Z,{onClick:n=>e(t),variant:"contained",children:"Send"})]}),(0,s.jsx)("div",{children:null==n?void 0:n.map(e=>(0,s.jsx)("li",{children:e}))})]})}},8972:function(e,n,t){"use strict";t.r(n),t.d(n,{SocketProvider:function(){return u},useSocket:function(){return o}});var s=t(7573),r=t(9062),i=t(7653);let l=i.createContext(null),o=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("State is undefined");return e},u=e=>{let{children:n}=e,[t,o]=(0,i.useState)(),[u,c]=(0,i.useState)([]),a=(0,i.useCallback)(e=>{console.log("Send Message",e),t&&t.emit("event:message",{message:e})},[t]),d=(0,i.useCallback)(e=>{console.log("from server msg rec...",e);let{message:n}=JSON.parse(e);c(e=>[...e,n])},[]);return(0,i.useEffect)(()=>{let e=(0,r.io)("http://localhost:8000");return e.on("message",d),o(e),()=>{e.disconnect(),e.off("message",d),o(void 0)}},[]),(0,s.jsx)(l.Provider,{value:{sendMessage:a,messages:u},children:n})}}},function(e){e.O(0,[564,95,293,16,744],function(){return e(e.s=7652)}),_N_E=e.O()}]);